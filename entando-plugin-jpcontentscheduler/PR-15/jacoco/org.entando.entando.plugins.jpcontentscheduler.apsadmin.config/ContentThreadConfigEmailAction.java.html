<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ContentThreadConfigEmailAction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Entando Plugin: Content Scheduler</a> &gt; <a href="index.source.html" class="el_package">org.entando.entando.plugins.jpcontentscheduler.apsadmin.config</a> &gt; <span class="el_source">ContentThreadConfigEmailAction.java</span></div><h1>ContentThreadConfigEmailAction.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2017-Present Entando Inc. (http://www.entando.com) All rights reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the &quot;Software&quot;), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
package org.entando.entando.plugins.jpcontentscheduler.apsadmin.config;

import org.entando.entando.plugins.jpcontentscheduler.aps.system.services.content.IContentSchedulerManager;
import org.entando.entando.plugins.jpcontentscheduler.aps.system.services.content.model.ContentThreadConfig;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.agiletec.aps.system.services.baseconfig.ConfigInterface;
import com.agiletec.apsadmin.system.BaseAction;
import com.agiletec.plugins.jacms.aps.system.services.content.IContentManager;
import com.opensymphony.xwork2.Action;

/**
 * @author E.Santoboni
 */
<span class="nc" id="L37">public class ContentThreadConfigEmailAction extends BaseAction {</span>

<span class="nc" id="L39">	private static final Logger _logger = LoggerFactory.getLogger(ContentThreadConfigEmailAction.class);</span>

	/**
	 * entrypoint
	 * 
	 * @return
	 */
	public String viewEmail() {
		try {

<span class="nc" id="L49">			ContentThreadConfig config = this.getContentSchedulerManager().getConfig();</span>

<span class="nc" id="L51">			this.setSenderCode(config.getSenderCode());</span>
<span class="nc" id="L52">			this.setMailAttrName(config.getMailAttrName());</span>
<span class="nc" id="L53">			this.setAlsoHtml(config.isAlsoHtml());</span>

<span class="nc" id="L55">			this.setSubject(config.getSubject());</span>

<span class="nc" id="L57">			this.setHtmlFooter(config.getHtmlFooter());</span>
<span class="nc" id="L58">			this.setHtmlHeader(config.getHtmlHeader());</span>
<span class="nc" id="L59">			this.setHtmlSeparator(config.getHtmlSeparator());</span>

<span class="nc" id="L61">			this.setTextFooter(config.getTextFooter());</span>
<span class="nc" id="L62">			this.setTextHeader(config.getTextHeader());</span>
<span class="nc" id="L63">			this.setTextSeparator(config.getTextSeparator());</span>

<span class="nc" id="L65">			this.setHtmlFooterMove(config.getHtmlFooterMove());</span>
<span class="nc" id="L66">			this.setHtmlHeaderMove(config.getHtmlHeaderMove());</span>
<span class="nc" id="L67">			this.setHtmlSeparatorMove(config.getHtmlSeparatorMove());</span>

<span class="nc" id="L69">			this.setTextFooterMove(config.getTextFooterMove());</span>
<span class="nc" id="L70">			this.setTextHeaderMove(config.getTextHeaderMove());</span>
<span class="nc" id="L71">			this.setTextSeparatorMove(config.getTextSeparatorMove());</span>

<span class="nc" id="L73">		} catch (Throwable t) {</span>
<span class="nc" id="L74">			_logger.error(&quot;Error in viewEmail&quot;, t);</span>
<span class="nc" id="L75">			return FAILURE;</span>
<span class="nc" id="L76">		}</span>
<span class="nc" id="L77">		return Action.SUCCESS;</span>
	}

	public String saveItem() {
		try {

<span class="nc" id="L83">			ContentThreadConfig config = this.getContentSchedulerManager().getConfig();</span>

<span class="nc" id="L85">			config.setSenderCode(this.getSenderCode());</span>
<span class="nc" id="L86">			config.setMailAttrName(this.getMailAttrName());</span>
<span class="nc" id="L87">			config.setAlsoHtml(this.isAlsoHtml());</span>

<span class="nc" id="L89">			config.setSubject(this.getSubject());</span>

<span class="nc" id="L91">			config.setHtmlFooter(this.getHtmlFooter());</span>
<span class="nc" id="L92">			config.setHtmlHeader(this.getHtmlHeader());</span>
<span class="nc" id="L93">			config.setHtmlSeparator(this.getHtmlSeparator());</span>

<span class="nc" id="L95">			config.setTextFooter(this.getTextFooter());</span>
<span class="nc" id="L96">			config.setTextHeader(this.getTextHeader());</span>
<span class="nc" id="L97">			config.setTextSeparator(this.getTextSeparator());</span>

<span class="nc" id="L99">			config.setHtmlFooterMove(this.getHtmlFooterMove());</span>
<span class="nc" id="L100">			config.setHtmlHeaderMove(this.getHtmlHeaderMove());</span>
<span class="nc" id="L101">			config.setHtmlSeparatorMove(this.getHtmlSeparatorMove());</span>

<span class="nc" id="L103">			config.setTextFooterMove(this.getTextFooterMove());</span>
<span class="nc" id="L104">			config.setTextHeaderMove(this.getTextHeaderMove());</span>
<span class="nc" id="L105">			config.setTextSeparatorMove(this.getTextSeparatorMove());</span>

<span class="nc" id="L107">			this.getContentSchedulerManager().updateConfig(config);</span>

<span class="nc" id="L109">			this.addActionMessage(this.getText(&quot;jpcontentscheduler.saveItem.success&quot;));</span>
<span class="nc" id="L110">		} catch (Throwable t) {</span>
<span class="nc" id="L111">			_logger.error(&quot;Error saving item&quot;, t);</span>
<span class="nc" id="L112">			return FAILURE;</span>
<span class="nc" id="L113">		}</span>
<span class="nc" id="L114">		return Action.SUCCESS;</span>
	}

	public void setBaseConfigManager(ConfigInterface baseConfigManager) {
<span class="nc" id="L118">		this._baseConfigManager = baseConfigManager;</span>
<span class="nc" id="L119">	}</span>

	public ConfigInterface getBaseConfigManager() {
<span class="nc" id="L122">		return _baseConfigManager;</span>
	}

	public IContentSchedulerManager getContentSchedulerManager() {
<span class="nc" id="L126">		return _contentSchedulerManager;</span>
	}

	public void setContentSchedulerManager(IContentSchedulerManager contentSchedulerManager) {
<span class="nc" id="L130">		this._contentSchedulerManager = contentSchedulerManager;</span>
<span class="nc" id="L131">	}</span>

	public IContentManager getContentManager() {
<span class="nc" id="L134">		return contentManager;</span>
	}

	public void setContentManager(IContentManager contentManager) {
<span class="nc" id="L138">		this.contentManager = contentManager;</span>
<span class="nc" id="L139">	}</span>

	public String getSenderCode() {
<span class="nc" id="L142">		return senderCode;</span>
	}

	public void setSenderCode(String senderCode) {
<span class="nc" id="L146">		this.senderCode = senderCode;</span>
<span class="nc" id="L147">	}</span>

	public String getMailAttrName() {
<span class="nc" id="L150">		return mailAttrName;</span>
	}

	public void setMailAttrName(String mailAttrName) {
<span class="nc" id="L154">		this.mailAttrName = mailAttrName;</span>
<span class="nc" id="L155">	}</span>

	public boolean isAlsoHtml() {
<span class="nc" id="L158">		return alsoHtml;</span>
	}

	public void setAlsoHtml(boolean alsoHtml) {
<span class="nc" id="L162">		this.alsoHtml = alsoHtml;</span>
<span class="nc" id="L163">	}</span>

	public String getSubject() {
<span class="nc" id="L166">		return subject;</span>
	}

	public void setSubject(String subject) {
<span class="nc" id="L170">		this.subject = subject;</span>
<span class="nc" id="L171">	}</span>

	public String getHtmlHeader() {
<span class="nc" id="L174">		return htmlHeader;</span>
	}

	public void setHtmlHeader(String htmlHeader) {
<span class="nc" id="L178">		this.htmlHeader = htmlHeader;</span>
<span class="nc" id="L179">	}</span>

	public String getHtmlFooter() {
<span class="nc" id="L182">		return htmlFooter;</span>
	}

	public void setHtmlFooter(String htmlFooter) {
<span class="nc" id="L186">		this.htmlFooter = htmlFooter;</span>
<span class="nc" id="L187">	}</span>

	public String getHtmlSeparator() {
<span class="nc" id="L190">		return htmlSeparator;</span>
	}

	public void setHtmlSeparator(String htmlSeparator) {
<span class="nc" id="L194">		this.htmlSeparator = htmlSeparator;</span>
<span class="nc" id="L195">	}</span>

	public String getTextHeader() {
<span class="nc" id="L198">		return textHeader;</span>
	}

	public void setTextHeader(String textHeader) {
<span class="nc" id="L202">		this.textHeader = textHeader;</span>
<span class="nc" id="L203">	}</span>

	public String getTextFooter() {
<span class="nc" id="L206">		return textFooter;</span>
	}

	public void setTextFooter(String textFooter) {
<span class="nc" id="L210">		this.textFooter = textFooter;</span>
<span class="nc" id="L211">	}</span>

	public String getTextSeparator() {
<span class="nc" id="L214">		return textSeparator;</span>
	}

	public void setTextSeparator(String textSeparator) {
<span class="nc" id="L218">		this.textSeparator = textSeparator;</span>
<span class="nc" id="L219">	}</span>

	public String getHtmlHeaderMove() {
<span class="nc" id="L222">		return htmlHeaderMove;</span>
	}

	public void setHtmlHeaderMove(String htmlHeaderMove) {
<span class="nc" id="L226">		this.htmlHeaderMove = htmlHeaderMove;</span>
<span class="nc" id="L227">	}</span>

	public String getHtmlFooterMove() {
<span class="nc" id="L230">		return htmlFooterMove;</span>
	}

	public void setHtmlFooterMove(String htmlFooterMove) {
<span class="nc" id="L234">		this.htmlFooterMove = htmlFooterMove;</span>
<span class="nc" id="L235">	}</span>

	public String getHtmlSeparatorMove() {
<span class="nc" id="L238">		return htmlSeparatorMove;</span>
	}

	public void setHtmlSeparatorMove(String htmlSeparatorMove) {
<span class="nc" id="L242">		this.htmlSeparatorMove = htmlSeparatorMove;</span>
<span class="nc" id="L243">	}</span>

	public String getTextHeaderMove() {
<span class="nc" id="L246">		return textHeaderMove;</span>
	}

	public void setTextHeaderMove(String textHeaderMove) {
<span class="nc" id="L250">		this.textHeaderMove = textHeaderMove;</span>
<span class="nc" id="L251">	}</span>

	public String getTextFooterMove() {
<span class="nc" id="L254">		return textFooterMove;</span>
	}

	public void setTextFooterMove(String textFooterMove) {
<span class="nc" id="L258">		this.textFooterMove = textFooterMove;</span>
<span class="nc" id="L259">	}</span>

	public String getTextSeparatorMove() {
<span class="nc" id="L262">		return textSeparatorMove;</span>
	}

	public void setTextSeparatorMove(String textSeparatorMove) {
<span class="nc" id="L266">		this.textSeparatorMove = textSeparatorMove;</span>
<span class="nc" id="L267">	}</span>

	private ConfigInterface _baseConfigManager;
	private IContentSchedulerManager _contentSchedulerManager;
	private IContentManager contentManager;

	private String senderCode;
	private String mailAttrName;
	private boolean alsoHtml;

	private String subject;
	private String htmlHeader;
	private String htmlFooter;
	private String htmlSeparator;

	private String textHeader;
	private String textFooter;
	private String textSeparator;

	private String htmlHeaderMove;
	private String htmlFooterMove;
	private String htmlSeparatorMove;

	private String textHeaderMove;
	private String textFooterMove;
	private String textSeparatorMove;

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>